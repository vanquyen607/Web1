<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/dangky.css">
    <!-- <link rel="stylesheet" href="../js/dangki.js"> -->
    <!-- <link rel="stylesheet" href="./assets/font/themify-icons/themify-icons.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />    
</head>

<script>
  
  var a=0;
  function validateRegistration(username, password,repassword) {
  // Kiá»ƒm tra xem trÆ°á»ng Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c Ä‘iá»n vÃ o
  if (!username ) {
    alert("Vui lÃ²ng Ä‘iá»n tÃªn Ä‘Äƒng nháº­p");
    return false;
  }

  
  if ( !password ) {
    alert("Vui lÃ²ng Ä‘iá»n máº­t kháº©u");
    return false;
  }

  if (!repassword) {
    alert("Vui lÃ²ng Ä‘iá»n láº¡i máº­t kháº©u");
    return false;
  }


  // Kiá»ƒm tra tÃªn Ä‘Äƒng nháº­p
  var userregex = /[^\s]+[\d{6}]$/; //báº¯t Ä‘áº§u báº±ng kÃ­ tá»± vÃ  ná»‘i tiáº¿p chuá»—i 6 kÃ­ tá»± sá»‘
  if(!userregex.test(username))
  {
    alert("TÃªn Ä‘Äƒng nháº­p khÃ´ng há»£p lá»‡");
    return false;
  }
  


  

  // Kiá»ƒm tra Ä‘á»™ dÃ i tá»‘i thiá»ƒu cá»§a máº­t kháº©u (vÃ­ dá»¥: Ã­t nháº¥t 6 kÃ½ tá»±)
  if (password.length < 6) {
    alert("Máº­t kháº©u cáº§n Ã­t nháº¥t 6 kÃ½ tá»±");
    return false;
  }

  if(password != repassword) {
    alert("Máº­t kháº©u khÃ´ng khá»›p !")
    return false;
  }


 

  // Náº¿u táº¥t cáº£ kiá»ƒm tra Ä‘á»u Ä‘Ãºng, tráº£ vá» true
  return true;
}

function validateEmail(email) {
  //Kiá»ƒm tra email
  if(!email)
  {
    alert("Vui lÃ²ng Ä‘iá»n email");
    return false;
  }
  // Biá»ƒu thá»©c chÃ­nh quy cho Ä‘á»‹a chá»‰ email
  var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  // Kiá»ƒm tra xem Ä‘á»‹a chá»‰ email cÃ³ há»£p lá»‡ khÃ´ng
  if (emailRegex.test(email)) {
    return true;
  } 
  else {
    alert("Äá»‹a chá»‰ email khÃ´ng há»£p lá»‡");
    return false;
  }
}

//Kiem tra dia chi khach hang
function validateAddress(address) {
  if(!address.trim()){
    alert("Vui lÃ²ng Ä‘iá»n Ä‘á»‹a chá»‰ ");
    return false;
  }

  var addressRegex = /[^\s]+$/;

  if(addressRegex.test(address)){
    return true;
  }
  else{
    alert("Äá»‹a chá»‰ khÃ´ng há»£p lá»‡");
    return false;
  }
}

// Kiem tra fullname khach hang
function validateFullname(fullname) {
  
  if(!fullname.trim()) {
    alert("Vui lÃ²ng Ä‘iá»n há» tÃªn ");
    return false;
  }
  
  // Kiá»ƒm tra xem chuá»—i chá»‰ chá»©a kÃ½ tá»± chá»¯ vÃ  khoáº£ng tráº¯ng
  var fullnameRegex = /^[A-Za-z\s]+$/;

  if(fullnameRegex.test(fullname)){
    return true;
  }
  else{
    alert("Há» tÃªn khÃ´ng há»£p lá»‡");
    return false;
  }
}

// Kiem tra phonenumber khach hang
function validatePhonenumber(phonenumber) {
  if(!phonenumber.trim()){
    alert("Vui lÃ²ng Ä‘iá»n sá»‘ Ä‘iá»‡n thoáº¡i ");
    return false;
  }

  var phonenumberRegex = /^[0]+\d{9}$/;

  if(phonenumberRegex.test(phonenumber)){
    return true;
  }
  else{
    alert("Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng há»£p lá»‡");
    return false;
  }
}




var usersDataArray = JSON.parse(localStorage.getItem('usersDataArray')) || [];



function registerUser(e) {
  event.preventDefault();
  var username = document.getElementById('username').value;
  var password = document.getElementById('password').value;
  var email = document.getElementById('email').value;
  var repassword =document.getElementById('repassword').value;
  var address = document.getElementById('address').value;
  var fullname = document.getElementById('fullname').value;
  var phonenumber = document.getElementById('phonenumber').value;

  // Kiá»ƒm tra dá»¯ liá»‡u nháº­p vÃ o
  if ( validateRegistration(username, password,repassword) 
  && validateEmail(email) 
  && validateAddress(address) 
  && validateFullname(fullname) && validatePhonenumber(phonenumber)
  )
  {
    
    // Tiáº¿p tá»¥c xá»­ lÃ½ hoáº·c lÆ°u trá»¯ dá»¯ liá»‡u náº¿u muá»‘n
    a++;
    var user = { 
      userId: a,
      username: username,
      password: password ,
      email: email,
      address: address,
      fullname: fullname,
      phonenumber: phonenumber        
    };

    // Kiá»ƒm tra xem user Ä‘Ã£ tá»“n táº¡i trong máº£ng chÆ°a
    var existingUser = usersDataArray.find(function(user) {
      return user.username === username || user.email === email;
    });

    if (existingUser) {
    alert("Username hoáº·c email Ä‘Ã£ tá»“n táº¡i.");
    return false;
    }
    
    // ThÃªm Ä‘á»‘i tÆ°á»£ng user vÃ o máº£ng
    usersDataArray.push(user);

    // // LÆ°u máº£ng vÃ o Local Storage
    localStorage.setItem('usersDataArray', JSON.stringify(usersDataArray));

    
    alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng");

  }

    
}

    function togglePasswordVisibility() {
      var passwordInput = document.getElementById('password');
      var showPasswordIcon = document.getElementById('showPasswordIcon');

      // Thay Ä‘á»•i thuá»™c tÃ­nh type cá»§a trÆ°á»ng máº­t kháº©u
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        showPasswordIcon.textContent = "ğŸ‘ï¸"; // Khi hiá»ƒn thá»‹ máº­t kháº©u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng emoji khÃ¡c
      } else {
        passwordInput.type = "text";
        passwordInput.type = "password";
        showPasswordIcon.textContent = "ğŸ‘ï¸"; // Khi áº©n máº­t kháº©u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng emoji khÃ¡c
      }
    }

    function toggleRePasswordVisibility() {
      var passwordInput = document.getElementById('repassword');
      var showPasswordIcon = document.getElementById('showRePasswordIcon');

      // Thay Ä‘á»•i thuá»™c tÃ­nh type cá»§a trÆ°á»ng máº­t kháº©u
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        showPasswordIcon.textContent = "ğŸ‘ï¸"; // Khi hiá»ƒn thá»‹ máº­t kháº©u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng emoji khÃ¡c
      } else {
        passwordInput.type = "text";
        passwordInput.type = "password";
        showPasswordIcon.textContent = "ğŸ‘ï¸"; // Khi áº©n máº­t kháº©u, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng emoji khÃ¡c
      }
    }
    

</script>

<body>
    <div class="wapper">

        <form action=""  id="fomdangky" onsubmit="registerUser();">

                <h1>ÄÄ‚NG KÃ</h1>
                <div class="input">

                    <div class="input-form">
                        <span class="text">Username</span>
                        <input type="text" id="username" class="input-box" placeholder="NAME">
                    
                    </div>

                    <div class="input-form">
                        <span class="text">Email</span>
                        <input type="email" id="email" class="input-box" placeholder="EMAIL">
              

                    </div>

                    <div class="input-form">
                        <span class="text">Password</span>
                        <input type="password" id="password" class="input-box">
                        <span id="showPasswordIcon" onclick="togglePasswordVisibility()">ğŸ‘ï¸</span>
                    

                    </div>
    
                    <div class="input-form">
                        <span class="text">Confirm Password</span>
                        <input type="password" id="repassword" class="input-box">
                        <span id="showRePasswordIcon" onclick="toggleRePasswordVisibility()">ğŸ‘ï¸</span>
                        
                        

                    </div>

                    <div class="input-form">
                      <span class="text">Address</span>
                      <input type="text" id="address" class="input-box" placeholder="">
                  
                    </div>

                    <div class="input-form">
                      <span class="text">Full Name</span>
                      <input type="text" id="fullname" class="input-box" placeholder="">
                  
                    </div>

                    <div class="input-form">
                      <span class="text">Phone Number</span>
                      <input type="text" id="phonenumber" class="input-box" placeholder="">
                  
                    </div>

                </div>
                <div class="icon">
                    <a href=""><i class="icon-item fab fa-facebook"></i></a>
                    <a href=""><i class="icon-item fab fa-twitter"></i></a>
                    <a href=""><i class="icon-item fab fa-google"></i></a>
                </div>
                <p>Náº¿u báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n ? <a id="backdangnhap" href="./dangnhap.html">Login</a></p>
                <div class="form-btn">
                   
                    <button type="submit"  class="btn-dangky">ÄÄ‚NG KÃ</button>
                    
                </div>

           
        </form>
    </div>    
</body>

</html>